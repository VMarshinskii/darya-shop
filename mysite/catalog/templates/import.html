{% extends "admin/base_site.html" %}
{% load static %}

{% block extrahead %}{{ block.super }}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js" ></script>
    <script src="{% static "ajaxuploader/js/fileuploader.js" %}" ></script>
    <link href="{% static "ajaxuploader/css/fileuploader.css" %}" media="screen" rel="stylesheet" type="text/css" />
    <script>
        $(function(){
        var uploader = new qq.FileUploader({
            action: "/ajax-upload",
            element: $('#file-uploader')[0],
            multiple: true,
            onComplete: function(id, fileName, responseJSON) {
                if(responseJSON.success) {
                    alert("success!");
                } else {
                    alert("upload failed!");
                }
            },
            onAllComplete: function(uploads) {
                // uploads is an array of maps
                // the maps look like this: {file: FileObject, response: JSONServerResponse}
                alert("All complete!");
            },
            params: {
                'csrf_token': '{{ csrf_token }}',
                'csrf_name': 'csrfmiddlewaretoken',
                'csrf_xname': 'X-CSRFToken'
            }
        });
        });
    </script>
{% endblock %}
{% block extrastyle %}{{ block.super }}
{% endblock %}
{% block bodyclass %}{{ opts.app_label }}-{{ opts.object_name.lower }} change-form{% endblock %}

{% block content %}
    <div id="file-uploader">
        <noscript>
            <p>Please enable JavaScript to use file uploader.</p>
        </noscript>
    </div>

    <div class="tab-content tab-content-main">
            <fieldset class="module aligned first ">

            <div class="control-group form-row field-name ">
            <div>
            <div class="control-label">
            <label class="required" for="id_name">Название:</label>
            </div>
            <div class="controls">
            <input class="vTextField" id="id_name" maxlength="200" name="name" type="text">
            </div>
            </div>
            </div>

            <div class="control-group form-row field-price ">
                <div>
                    <div class="control-label">
                        <label class="required" for="id_price">Цена:</label>
                    </div>
                    <div class="controls">
                        <input class="vIntegerField" id="id_price" name="price" type="text">
                    </div>
                </div>
            </div>

            <div class="control-group form-row field-sale ">
                <div>
                    <div class="control-label">
                        <label class="required" for="id_sale">Скидка, %:</label>
                    </div>
                    <div class="controls">
                        <input class="vIntegerField" id="id_sale" name="sale" type="text">
                    </div>
                </div>
            </div>

            <div class="control-group form-row field-sale_status ">
                <div>
                    <div class="control-label">
                        <label class="required" for="id_sale_status">Сделать скидку:</label>
                    </div>
                    <div class="controls">
                        <input class="vIntegerField" id="id_sale_status" name="sale_status" type="text">
                    </div>
                </div>
            </div>



            <div class="control-group form-row field-count ">
                <div>
                    <div class="control-label">
                        <label class="required" for="id_count">Товар в наличии:</label>
                    </div>
                    <div class="controls">
                        <input class="vIntegerField" id="id_count" name="count" type="text">
                    </div>
                </div>
            </div>

        </fieldset>
    </div>
{% endblock %}